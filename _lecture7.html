<!DOCTYPE html>
<!--
	Web 2.0, CTU course slides
	(cc) 2010-2013 Tomas Vitvar, tomas@vitvar.com
-->
<html>   
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/> 
        <meta name="course"   content="Web 2.0"/>
		<meta name="lecture"  content="Lecture 7"/>
   		<meta name="keywords" content="atom, atompub procotol, atom feed, atom entry"/>
           
        <link type="text/css" rel="stylesheet" href="css/meta.css"></link>   
        <link type="text/css" rel="stylesheet" href="css/ctu-fit.css"></link>   
        <link type="text/css" rel="stylesheet" href="humla/lib/core/humla.css"></link>   

        <script type="text/javascript" src="humla/lib/humla.js"></script>
        <title>Data Structures &ndash; Atom and AtomPub</title>
	</head>
	<body> 
    
		<footer>
			<p><b>#META_LECTURE#: #TITLE#</b>,&nbsp;<span class="meta_semester"/>,&nbsp;
			<span class="meta_twitter"/></p>
			<p><b>&#8210; #SLIDE_NO# &#8210;</b></p>
		</footer>

    	<div class="slide intro">
			<hgroup>
				<h1><span class="meta_course"/></h1>
 				<h2>#META_LECTURE#: #TITLE#</h2>
			</hgroup>
			<div class="author">
				<p class="meta_author"/>
				<p><span class="meta_email"/> &bull; <span class="meta_twitter"/> &bull; 
				<span class="meta_web"/></p>
			</div>
			<center><div class="meta_logo"></div></center>
			<div class="org">
				<p class="meta_org"/>
				<p><span class="meta_orgfac"/> &bull; <span class="meta_field"/> 
				&bull; <span class="meta_orgweb"/></p>
			</div>
			<div class="etc">
        		<div class="text-info">
    				Modified: #LAST_MODIFIED#<br/>
					Humla v#HUMLA_VERSION#
				</div>
				<a href="http://creativecommons.org/licenses/by-sa/3.0/"><div class="license"></div></a>
				<div class="oppa"></div>
			</div>
		</div>		
		
		<div class="slide outline"></div>
		
		<section>
			<header>Overview of Formats and Protocols</header>

			<div class="slide">
				<hgroup>
					<h1>Data on the Web</h1>
				</hgroup>
				<div class="h-drawing" style="height: 450px" 
					id="161LY9K1fWd-G3iNpulEEEXq1yoxvjsQxombdyV4Yyfc"></div>
			</div>

			<div class="slide">
				<hgroup>
					<h1>Data Syntax, Structure and Semantics</h1>
				</hgroup>
				<div class="h-drawing" style="height: 430px" 
					id="1sm2ZB4YcB2FHzj5uD0xBLeIDZjmz14NzjyGeSgmBl0U"></div>
			</div>
		</section>
		
		<div class="slide">
			<hgroup>
				<h1>Atom Standard</h1>
			</hgroup>
			<ul class="spacing-20">
				<li>Need for a standard syndication format</li>
				<ul class="x-small">
					<li>machine-processable Web site content</li>
					<li>Alternative to RSS</li>
					<ul>
						<li>RSS spec does not say how to encode content, strings only ASCII-encoded, 
					not clearly defined meaning of RSS elements, etc.</li>
						<li>See <span id="rss-flaws" class="h-ref"></span></li>
					</ul>
				</ul>
				<li>IETF Atom Publishing Format and Protocol WG</li>
				<ul>
					<li>RFC 4287: <span id="rfc-4287" class="h-ref"></span></li>
					<li>RFC 5023: <span id="rfc-5023" class="h-ref"></span></li>
				</ul>
				<li>Adoption</li>
				<ul>
					<li>Google: Google Data Protocol (GData)</li>
					<li>Microsoft: Open Data Protocol (OData)</li>
				</ul>
			</ul>
		</div>
		
		<div class="slide outline"></div>
				
		<section>
			<header>Atom Syndication Format</header>

			<div class="slide">
				<hgroup>
					<h1>Atom Syndication Format</h1>
				</hgroup>
				<div style="height: 290px" id="1zk9j2KMGel79M1x94pFz8We0aPuKl9X9p9sJehFA-M8" 
					class="h-drawing"></div>
				<ul>
					<li>Two types of atom documents</li>
					<ul class="x-small">
						<li>Atom Feed Document</li>
						<ul>
							<li>represents an atom feed, its metadata and some or all entries associated with it.</li>
						</ul>
						<li>Atom Entry Document</li>
						<ul>
							<li>represents exactly one entry, outside of context of atom feed</li>
						</ul>
					</ul>
				</ul>
			</div>
			
			<div class="slide">
				<hgroup>
					<h1>Atom Syndication Format</h1>
				</hgroup>
				<ul>
					<li>Atom Feed Document Example</li>
				</ul>
				<pre class="brush: xml; class-name: 'tight'" style="zoom: 0.6">
				&lt;?xml version="1.0" encoding="utf-8"?>
				&lt;feed xmlns="http://www.w3.org/2005/Atom">

				   &lt;title>Example Feed&lt;/title>
				   &lt;link href="http://example.org/"/>
				   &lt;updated>2003-12-13T18:30:02Z&lt;/updated>
				   &lt;author>
				      &lt;name>John Doe&lt;/name>
				    &lt;/author>
				    &lt;id>urn:uuid:60a76c80-d399-11d9-b93C-0003939e0af6&lt;/id>
				    
				    &lt;entry>
				    	&lt;title>Example feed title&lt;/title>
				    	&lt;link href="http://example.org/2003/12/13/atom03"/>
				    	&lt;id>urn:uuid:1225c695-cfb8-4ebb-aaaa-80da344efa6a&lt;/id>
				    	&lt;updated>2003-12-13T18:30:02Z&lt;/updated>
				    	&lt;summary>Some text&lt;/summary>
				    &lt;/entry>
				&lt;/feed></pre>
				
			</div>
			
			<div class="slide">
				<hgroup>
					<h1>Atom Elements &ndash; Atom Feed</h1>
				</hgroup>
				<ul class="xx-small">
					<li>Specification</li>
					<ul class="small">
						<li>defined as XML information set, serialized as XML 1.0</li>
						<li>must be well-formed, no DTD/Schema &rarr; no requirements to be valid.</li>
					</ul>
					<li><code>atom:feed</code> element</li>
					<ul class="no-bullet">
						<li><code>(*)</code>: zero or more occurencies &ndash; repeating fields</li>
						<li><code>(?)</code>: zero or one occurence &ndash; non-repeating fields</li>
						<li><code>( )</code>: exactly one occurence &ndash; non-repeating fields</li>
					</ul>	
					<pre class="brush: bash; class-name: 'tight' ">
				atomFeed =
      				   element atom:feed {
         			      atomCommonAttributes,
         			         (atomAuthor*
          			         & atomCategory*
          			         & atomContributor*
          			         & atomGenerator?
          			         & atomIcon?
          			         & atomId
          			         & atomLink*
          			         & atomLogo?
          			         & atomRights?
          			         & atomSubtitle?
          			         & atomTitle
          			         & atomUpdated
          			         & extensionElement*),
         			      atomEntry*
      				   }</pre>
				</ul>
			</div>

			<div class="slide">
				<hgroup>
					<h1>Atom Elements &ndash; Atom Entry</h1>
				</hgroup>
				<ul class="small">
					<li><code>atom:entry</code> element</li>
					<ul class="no-bullet">
						<li><code>(*)</code>: zero or more occurencies &ndash; repeating fields</li>
						<li><code>(?)</code>: zero or one occurence &ndash; non-repeating fields</li>
						<li><code>( )</code>: exactly one occurence &ndash; non-repeating fields</li>
					</ul>	
					<pre class="brush: bash; class-name: 'tight' ">
				atomEntry =
      				   element atom:entry {
         			      atomCommonAttributes,
         			        (atomAuthor*
          			        & atomCategory*
							& atomContent?
							& atomContributor*
							& atomId
          					& atomLink*
          					& atomPublished?
          					& atomRights?
          					& atomSource?
          					& atomSummary?
          					& atomTitle
          					& atomUpdated
          					& extensionElement*)
      				}</pre>					
				</ul>
			</div>

			<div class="slide">
				<hgroup>
					<h1>Pointers to other information</h1>
				</hgroup>
				<ul class="x-spacing">
					<li>URI identifier</li>
					<ul>
						<li>unique identification of things</li>
						<li>feed/entry <code>id</code></li>
						<li><code>author</code> and <br/><code>contributor</code> (person uri)</li>
						<li><code>generator</code> (uri)</li>
						<li><code>category</code> schema (uri), term (uri)<br/>
						example:<br/>
						<pre class="brush: xml; class-name: 'tight' ">
							&lt;category scheme="http://example.org/dogs"
							&nbsp;&nbsp;term="http://example.org/dogs#basset"
							&nbsp;&nbsp;label="Basset"/></pre>	
						</li>
					</ul>
					<div style="height: 200px; margin-left: 190px; margin-top: -360px; 
					padding-bottom: 140px" id="1ipVoIozMTXFeRaTfwTf9_QQajA_drinXdy5JZcXLDtk" class="h-drawing"></div>
					
					<li>Unambiguous identification of things using URIs</li>
					<ul class="x-small">
						<li>Helps interoperability, can take advantage of wikipedia concepts</li>
						<ul>
							<li>still not very common, will improve with linked data</li>
						</ul>
					</ul>
				</ul>
			</div>

			<div class="slide">
				<hgroup>
					<h1>Atom Links</h1>
				</hgroup>
				<ul class="x-spacing">
					<li>Links to other Atom documents</li>
					<ul>
						<li>Atom defines simple link structure</li>
						<li><code>type</code> defines content type</li>
						<li><code>rel</code> defines relation to this resource</li>
						<ul>
							<li>self, alternate, related, enclosure, via</li>
							<li>standardized by IANA</li>
						</ul>
					</ul>
					<li>Adoption by RESTful services</li>
					<ul>
						<li>Core for HATEOAS</li>
						<li>Adopted in Link header, see <span id="rfc-5988" class="h-ref"></span></li>
						<li>More details in the 
							<a href="http://vitvar.com/courses/slides/mdw/lecture8.html#/9/v1">MDW REST Lecture</a>.</li>
					</ul>
				</ul>
			</div>

			<div class="slide">
				<hgroup>
					<h1>Encoding Textual Content</h1>
				</hgroup>
				<ul class="small">
					<li>Plain text</li>
					<ul class="small">
						<pre class="brush: xml; class-name: 'tight' ">
						    &lt;title type="text">
						       Less: &amplt;
						    &lt;/text></pre>
   						<li>simple text, must not contain child elements</li>
					</ul>
					<li>HTML</li>
					<ul class="small">
						<pre class="brush: xml; class-name: 'tight' ">
						    &lt;title type="html">
						       Less: &amplt;em> &ampamp;lt; &amplt;/em>
						    &lt;/text></pre>
   						<li>html text, must not contain child elements</li>
   						<li>any markup must be escaped,</li>
   						<li>should be possible to display it as HTML inside <code>&lt;div></code> element</li>
					</ul>
					<li>XHTML</li>
					<ul class="small">
						<pre class="brush: xml; class-name: 'tight' ">
						    &lt;title type="xhtml" xmlns:x="http://www.w3.org/1999/xhtml">
						       &lt;x:div>Less: &lt;x:em> &ampamp;lt; &lt;/x:em>&lt;/x:div>
						    &lt;/text></pre>
   						<li>the value is a single xhtml <code>&lt;div></code> element, 
   						not part of the content</li>
 					</ul>
				</ul>	
			</div>

			<div class="slide">
				<hgroup>
					<h1>Aggregation</h1>
				</hgroup>
				<div style="height: 300px" id="1mH5Q9FLc7p0NKBC-OxiVq5SzlUqwiS4tYxCNQ0fGtxA" 
					class="h-drawing"></div>
				<ul style="margin-top: 30px">
					<ul class="small">
						<li>Atom feed may include entries from another atom feed</li>
						<ul>
							<li>these entries do not originally belong to this feed</li>
						</ul>
						<li><code>source</code> element should contain at least:</li>
						<ul> 
							<li>required atom feed's metadata
								<code>id</code>, <code>title</code> and <code>updated</code></li>
						</ul>
						<li>retains information about an entry's source feed</li>
					</ul>
				</ul>	
			</div>

			<div class="slide">
				<hgroup>
					<h1>Data and Time</h1>
				</hgroup>
				<ul>
					<li>Notion of time</li>
					<ul>
						<li>Atom document is a snapshot of resource in some time</li>
						<li><code>updated</code> (feed, entry) &ndash; last update of the resource</li>
						<li><code>published</code> (entry) &ndash; initial creation of the first availability of the resource</li>
					</ul>
					<li>Data format</li>
					<ul>
					<li>Examples:<br/>
					<pre class="brush: xml; class-name: 'tight'">
					    &lt;updated>2003-12-13&lt;/updated>
					    &lt;updated>2003-12-13T18:30:02.25Z&lt;/updated>
					    &lt;updated>2003-12-13T18:30:02.25+01:00&lt;/updated></pre>
   					<code>T</code> &ndash; time delimiter<br/>
   					<code>Z</code> &ndash; identifies UTC time (~GMT)<br/>
   					<code>(+|-)hh:mm</code> &ndash; defines local time and a shift in hours 
						and minutes from the UTC time</li>
				</ul>	
			</div>

			<div class="slide">
				<hgroup>
					<h1>Polling</h1>
				</hgroup>
				<div style="height: 390px" 
					id="15d4SxbbGYqPVyZXn01QeoODggGiHIfR9y8bowuHcdHY" class="h-drawing"></div>
				<ul style="margin-top: 20px"><ul class="small">
					<li><code>updated</code> is the last updated time of the resource at the server</li>
					<li>resource refresh interval is pre-defined by the serice</li>
				</ul></ul>
			</div>
			
			<div class="slide">
				<hgroup>
					<h1>Example Yahoo! Pipes</h1>
				</hgroup>
				<center><img src="img/l7/yahoo-pipes-refresh.png" style="width: 700px; 
					border: 2px solid lightblue; margin-top: 20px"></img></center>
				<ul style="margin-top: 20px"><ul class="small">
					<li>Yahoo! pipes example, time &times; latency</li>
					<li>polling interval: 5 minutes</li>
					<li>Resource refresh interval: 30 minutes (observed, fixed)</li>
				</ul></ul>
			</div>

			<div class="slide">
				<hgroup>
					<h1>Extensions</h1>
				</hgroup>
				<ul class="x-small">
					<li>Possible to combine various vocabularies</li>
					<ul>
						<li>through namespaces <code>xmlns</code> attribute, extensions of <code>link.rel</code> attribute</li>
					</ul>
					<li>Example: GData (PicasaWeb, Docs, ...)</li>
					<ul class="xx-small">
						<li>combines vocabularies such as Geo location</li>
					<pre class="brush: xml; class-name: 'tight'; highlight: [3,4,16,17,18,19,20,21]">
					&lt;?xml version='1.0' encoding='UTF-8'?&gt;
					&lt;feed xmlns='http://www.w3.org/2005/Atom' xmlns:gml='http://www.opengis.net/gml' 
					   xmlns:gphoto='http://schemas.google.com/photos/2007'
					   xmlns:georss='http://www.georss.org/georss'&gt;
					      &lt;id&gt;http://picasaweb.google.com/.../albumid/5262593967320034641&lt;/id&gt;
					      &lt;updated&gt;2010-02-25T20:47:53.295Z&lt;/updated&gt;
					      &lt;category 
					         scheme='http://schemas.google.com/g/2005#kind' 
					         term='http://schemas.google.com/photos/2007#album' /&gt;
					      &lt;title type='text'&gt;Památkově chráněný dům v Loukově&lt;/title&gt;
					      &lt;link rel='http://schemas.google.com/g/2005#feed' type='application/atom+xml'
					        href='http://picasaweb.google.com/.../albumid/5262593967320034641?hl=en_US' /&gt;
					      &lt;link rel='http://schemas.google.com/photos/2007#slideshow' 
					        type='application/x-shockwave-flash'
					        href='https://picasaweb.google.com/s/c/bin/slideshow.swf?...' /&gt;
					      &lt;georss:where&gt;
					         &lt;gml:Point&gt;
					           &lt;gml:pos&gt;50.5576865 15.0356436&lt;/gml:pos&gt;
					        &lt;/gml:Point&gt;
					      &lt;/georss:where&gt;
					      &lt;gphoto:allowPrints&gt;true&lt;/gphoto:allowPrints&gt;
					      ...
					&lt;/feed&gt;</pre>
					</ul>
				</ul>
			</div>
		</section>
			
		<div class="slide outline"></div>
		
		<section>		
			<header>AtomPub Protocol</header>			
			
			<div class="slide">
				<hgroup>
					<h1>AtomPub Protocol</h1>
				</hgroup>
				<ul>
					<li>Standard protocol for manipulation of resources</li>
					<ul>
						<li>Defines a service description by following constructs</li>
						<ul>
							<li><code>service</code> &ndash; a set of workspaces</li>
							<li><code>workspace</code> &ndash; a set of collections</li>
							<li><code>collection</code> &ndash; a set of resources</li>
						</ul>
						<li>Defines protocol for editing, that is: creating (POST), 
							updating (PUT), reading (GET), deleting (DELETE)</li>
					</ul>
					<li>Relation to Atom Syndication Format</li>
					<ul>
						<li>Atom Feed and Atom Entry as resource representations</li>
					</ul>
					<li>Basis for many, such as:</li>
					<ul>
						<li>Google Data Protocol (GData)</li>
						<li>Microsoft Open Protocol (OData)</li>
					</ul>
				</ul>
			</div>

			<div class="slide">
				<hgroup>
					<h1>AtomPub Elements</h1>
				</hgroup>
				<div id="13NRHsXtEQolpAmSgpuOyIbGUIY_n_-3GEmB6TOS7KLI" style="height: 300px" class="h-drawing"></div>
				<ul>
					<li>Collection properties and definition of constraints</li>
					<ul class="x-small">
						<li><code>URI</code> &ndash; id of the collection (Atom Feed)</li>
						<li><code>categories</code> &ndash; list of allowed categories in the collection</li>
						<li><code>accept</code> &ndash; list of Internet media types allowed in the collection</li>
						<li style="margin-top: 10px"><b>URI points to an Atom Feed resource!</b></li>
					</ul>
				</ul>
			</div>

			<div class="slide">
				<hgroup>
					<h1>Example Blogging Site Description</h1>
				</hgroup>
					<div class="h-drawing" style="height: 300px" 
					id="1VAqALYrhhHgAMtBZz1Wg_GQLHX0FsOMyrOn1fDWi5YQ"></div>
					<ul class="small">
						<li>Workspaces</li>
						<ul>
							<li>Main Site, Sidebar</li>
						</ul>
						<li>Collections</li>
						<ul>
							<li>Blog entries, pictures, interesting links</li>
						</ul>
					</ul>				
			</div>

			<div class="slide">
				<hgroup>
					<h1>Example Blogging Site Description</h1>
				</hgroup>
					<ul class="xx-small" style="margin-top: 15px">
					<pre class="brush: xml; class-name: 'tight'">
					&lt;?xml version='1.0' encoding='UTF-8'?&gt;
					&lt;service xmlns="http://www.w3.org/2007/app"
					    xmlns:atom="http://www.w3.org/2005/Atom">
					   &lt;workspace>
					      &lt;atom:title>Main Site&lt;/atom:title>
					      &lt;collection href="http://example.org/blog/main">
					         &lt;atom:title>Blog Entries&lt;/atom:title>
					         &lt;categories
					            href="http://example.com/cats" />
					      &lt;/collection>
					      &lt;collection href="http://example.org/blog/pic" >
					         &lt;atom:title>Pictures&lt;/atom:title>
					         &lt;accept>image/png&lt;/accept>
					         &lt;accept>image/gif&lt;/accept>
					      &lt;/collection>
					    &lt;/workspace>
					    &lt;workspace>
					        &lt;atom:title>Sidebar&lt;/atom:title>
					        &lt;collection href="http://example.org/blog/sidebar" >
					            &lt;atom:title>Interesting Links&lt;/atom:title>
					            &lt;accept>application/atom+xml;type=entry&lt;/accept>
					            &lt;categories fixed="yes">
					                &lt;atom:category
					                   scheme="http://example.org/cats"
					                   term="http://example.org/cats#joke" />
					                &lt;atom:category
					                   scheme="http://example.org/cats"
					                   term="http://example.org/cats#serious" />
					            &lt;/categories>
					        &lt;/collection>
					    &lt;/workspace>
					&lt;/service></pre>
				</ul>
			</div>
			
			<div class="slide">
				<hgroup>
					<h1>Protocol Operations</h1>
				</hgroup>
				<ul class="spacing-10">
					<li>Operations to manipulate resources</li>
					<ul>
						<li>Retrieving a service document (is obvious, GET)</li>
						<li>Listing collection members (filtering and projections)</li>
						<li>Creating a resource (entry and media)</li>
						<li>Editing a resource (is obvious, PUT and DELETE)</li>
					</ul>
					<li>AtomPub <b>does not define:</b></li>
					<ul>
						<li>Any manipulation with</li>
						<ul>
							<li>service documents, workspaces and collections</li>
						</ul>
						<li>How service documents are discovered</li>
					</ul>
					<li>AtomPub may be used w/o service descriptions</li>
					<ul>
						<li>They're good for discovering constraints on the service</li>
						<li>They're not a requirement</li>
						<li>For example, GData does not have them</li>
					</ul>
				</ul>
			</div>
			
			<div class="slide">
				<hgroup>
					<h1>Creating Entry Resource</h1>
				</hgroup>
				<div style="height: 280px" id="1-LeHFuTJ_n9KcwxiyhFU9UiKE32c2hZ7HX6NCy6OqV0" class="h-drawing"></div>
				<ul><ul class="x-small">
					<li>Server checks constraints of the collection</li>
					<li>Server may modify member representation</li>
					<ul>
						<li>such as changes <code>id</code>, adds <code>updated</code> element</li>
					</ul>
					<li>if <code>Content-Location</code> is not equal to <code>Location</code>
					the request and response representation are not the same!</li>
					<li><code>ETag</code> should be used for</li>
					<ul>
						<li>conditional GET and PUT (see <a href="lecture6.html#/17">
							lecture 6 &ndash; scalability</a>)</li>
					</ul>
				</ul></ul>
			</div>

			<div class="slide">
				<hgroup>
					<h1>Creating Media Resource</h1>
				</hgroup>
				<div style="height: 360px" id="1e6-e-9XRprCYtUcSnKXvxJlnPu86xjtLR3vsPZowPVQ" class="h-drawing"></div>
				<ul><ul class="x-small">
					<li>Server checks the constraints of the collection</li>
					<ul>
						<li>may return <code>415 Unsupported Media Type</code> if not accapted</li>
					</ul>
					<li>Media Link Entry is an Entry resource that describes metadata about 
						media resource (such as a picture)</li>
				</ul></ul>
			</div>

			<div class="slide">
				<hgroup>
					<h1>Listing Collection</h1>
				</hgroup>
				<ul class="small">
					<li>Must provide representation in Atom Feed</li>
					<li>Contains list of Atom <code>Entry</code> elements</li>
					<ul>
						<li>must have <code>link</code> with attribute <code>edit</code></li>
						<li>must have <code>edited</code>, order of entries by this date</li>
						<ul>
							<li>is not the same as <code>Last-Modified</code> header</li>
						</ul>
					</ul>
					<li>Entries in collection are not full representations</li>
					<ul class="small">
						<li>clients should retrieve them using GET on entry URI</li>
					</ul>
					<li>To limit amount of entries</li>
					<ul>
						<li>links with semantics for navigation through the whole list</li>
						<pre class="brush: xml; class-name: 'tight'">
						&lt;feed xmlns="http://www.w3.org/2005/Atom">
							&lt;link rel="first"    href="http://example.org/blog/main/" />
							&lt;link rel="previous" href="http://example.org/blog/main/3" />
							&lt;link rel="self"     href="http://example.org/blog/main/4" />
							&lt;link rel="next"     href="http://example.org/blog/main/5" />
							&lt;link rel="last"     href="http://example.org/blog/main/10" />
						&lt;/feed></pre>
					</ul>
				</ul>				
			</div>

			<div class="slide outline"></div>

			<section>		
				<header>Extensions</header>			

				<div class="slide">
					<hgroup>
						<h1>Extensions</h1>
					</hgroup>
					<ul class="x-spacing">
						<li>OpenSearch</li>
						<ul>
							<li>Specification: <span id="open-search" class="h-ref"></span></li>
							<li>Search service description and search results</li>
						</ul>	
						<li>Google Data Protocol</li>
						<ul>
							<li>Filtering, partial response and partial update</li>
							<li>Entity tag attribute for <code>&lt;feed></code> 
								and <code>&lt;entry></code> elements</li>
							<li>HTTP methods overriding</li></li>
						</ul>	
					</ul>
				</div>
				
				<div class="slide">
					<hgroup>
						<h1>OpenSearch</h1>
					</hgroup>
					<ul class="small">
						<li>Open Search Specification</li>
						<ul>
							<li><b>Open Search Description Document (OSDD)</b></li>
							<ul>
								<li>description of a search service</li>
							</ul>	
							<li><b>OpenSearch Response Document</b></li>
							<ul>
								<li>Standard description of search results by search services</li>
								<li>extension of syndication formats, RSS and Atom</li>	
							</ul>						
						</ul>
						<li>Adoption</li>
						<ul>
							<li>Browsers such as IE, SeaMonkey, Google Chrome &ndash; 
								search engines you can use to search various sites.</li>
							<li>APIs such as Bing API, Google Docs, etc. &ndash; description of search results.</li>
						</ul>
					</ul>
				</div>
				
				<div class="slide">
					<hgroup>
						<h1>OpenSearch Description Document</h1>
					</hgroup>	
					<ul class="x-small">
						<li>Example:</li>
					<pre class="brush: xml; class-name: 'tight'">
					 &lt;?xml version="1.0" encoding="UTF-8"?>
					 &lt;OpenSearchDescription xmlns="http://a9.com/-/spec/opensearch/1.1/">
					   &lt;ShortName>Web Search&lt;/ShortName>
					   &lt;Description>Use Example.com to search the Web.&lt;/Description>
					   &lt;Tags>example web&lt;/Tags>
					   &lt;Contact>admin@example.com&lt;/Contact>
					   &lt;Url type="application/atom+xml"
					        template="http://example.com/?q={searchTerms}&amp;pw={startPage?}&amp;format=atom"/>
					   &lt;Url type="application/rss+xml"
					        template="http://example.com/?q={searchTerms}&amp;pw={startPage?}&amp;format=rss"/>
					   &lt;Url type="text/html" 
					        template="http://example.com/?q={searchTerms}&amp;pw={startPage?}"/>
					   &lt;Image height="64" width="64" type="image/png">
							http://example.com/websearch.png
					   &lt;/Image>
					   &lt;Query role="example" searchTerms="cat" />
					   &lt;Developer>Example.com Development Team&lt;/Developer>
					   &lt;AdultContent>false&lt;/AdultContent>
					   &lt;Language>en-us&lt;/Language>
					   &lt;OutputEncoding>UTF-8&lt;/OutputEncoding>
					   &lt;InputEncoding>UTF-8&lt;/InputEncoding>
					 &lt;/OpenSearchDescription></pre>
					<ul style="margin-top: 25px"><li><code>searchTerms</code> is a free text</li></ul>
					</ul>
				</div>	

				<div class="slide">
					<hgroup>
						<h1>OpenSearch Response Document</h1>
					</hgroup>	
					<ul class="x-small">
						<li>Example:</li>
						<ul>
							<li>Result in Atom format of a search query</li>
						</ul>
					<pre class="brush: xml; class-name: 'tight'; highlight: [10,11,12,13,15,16]">
						&lt;?xml version="1.0" encoding="UTF-8"?>
						&lt;feed xmlns="http://www.w3.org/2005/Atom" 
						       xmlns:opensearch="http://a9.com/-/spec/opensearch/1.1/">
						   &lt;title>Example.com Search: New York history</title> 
						   &lt;updated>2003-12-13T18:30:02Z&lt;/updated>
						   &lt;author> 
						     &lt;name>Example.com, Inc.&lt;/name>
						   &lt;/author> 
						   &lt;id>urn:uuid:60a76c80-d399-11d9-b93C-0003939e0af6&lt;/id>
						   &lt;opensearch:totalResults>4230000&lt;/opensearch:totalResults>
						   &lt;opensearch:startIndex>21&lt;/opensearch:startIndex>
						   &lt;opensearch:itemsPerPage>10&lt;/opensearch:itemsPerPage>
						   &lt;opensearch:Query role="request" searchTerms="New York History" />
							...
						   &lt;link rel="search" type="application/opensearchdescription+xml" 
								href="http://example.com/opensearchdescription.xml"/>
						   &lt;entry>
						     &lt;title>New York History&lt;/title>
							 ...
						   &lt;/entry>
						 &lt;/feed>			
						</pre>
					</ul>
				</div>	
				
				<div class="slide">
					<hgroup>
						<h1>GData Protocol: Advanced Search Query</h1>
					</hgroup>
					<ul class="x-small">
						<li>OpenSearch does not specify syntax for search query</li>
						<ul>
							<li>It can be anything, free text</li>
							<li>GData Protocol further allows for filtering and projection</li>
						</ul>
						<li>Filtering</li>
						<ul>
							<li>Fine-grained conditions based on values of various elements</li>
							<ul> 
							<li>such as <code>author</code>, <code>category</code>, <code>max-results</code>, 
							  min and max of <code>published</code> and <code>updated</code> elements.</li>
							</ul>
						</ul>
						<pre class="brush: bash; class-name: 'tight'">
							http://www.example.com/feeds/jo?q=Darcy&amp;updated-min=2005-04-19T15:30:00Z
							http://www.example.com/feeds?category=Fritz%7CLaurie // URL encoded OR
							http://www.example.com/feeds?category=Fritz,CLaurie  // AND</pre>
						<li>Partial Response (~Projection)</li>
						<ul class="small">
							<li>Which elements of an entry should appear in the search result</li>
							<li>A language based on XPath syntax (subset of a valid XPath expression)</li>
						</ul>
						<pre class="brush: bash; class-name: 'tight'">
							http://example.org/blog/main?fields=link,entry(@gd:etag,updated,link[@rel='edit']))</pre>
					</ul>
				</div>

				<div class="slide">
					<hgroup>
						<h1>GData Protocol: Partial Update</h1>
					</hgroup>
					<ul class="x-small">
						<li><code>PATCH</code> HTTP Method</li>
						<ul>
							<li>IETF specification, see <span id="rfc-5789" class="h-ref"></span></li>
							<li>Add, modify or delete selected elements of an entry</li> 
						</ul>
						<li>Examples</li>
						<ul>
							<li>To delete a description element and add a new title element</li>
							<li><code>gd:fields</code> uses partial response syntax</li> 
						</ul>	
						<pre class="brush: xml; class-name: 'tight'">
							PATCH /myFeed/1/1/
							Content-Type: application/xml

							&lt;entry xmlns='http://www.w3.org/2005/Atom'
							    xmlns:gd='http://schemas.google.com/g/2005'
							    gd:fields='description'>
							  &lt;title>New title&lt;/title>
							&lt;/entry></pre>
						<li>Rules</li>
						<ul>
							<li>Fields not already present are added</li>
							<li>Non-repeating fields already present are updated</li>
							<li>Repeating fields already present are appended</li> 
						</ul>	
					</ul>
				</div>
				
				<div class="slide">
					<hgroup>
						<h1>GData Protocol: Entity Tags</h1>
					</hgroup>	
					<ul class="x-small">
						<li>Resource Versioning</li>
						<ul>
							<li>Conditional GET and PUT (concurrencyl control)</li>
							<ul>
								<li>See <a href="http://vitvar.com/courses/slides/mdw/lecture8.html#/19/v1">
									MDW lecture on scalability</a></li>
							</ul>
							<li>Etgas on atom and entry elements</li>
						</ul>
						<li>Example</li>
						<pre class="brush: xml; class-name: 'tight'">
							GData-Version: 2.0
							ETag: W/"C0QBRXcycSp7ImA9WxRVFUk."
							...
							&lt;?xml version='1.0' encoding='utf-8'?>
							&lt;feed xmlns='http://www.w3.org/2005/Atom'
							    xmlns:gd='http://schemas.google.com/g/2005'
							    gd:etag='W/"C0QBRXcycSp7ImA9WxRVFUk."'>
							  ...
							  &lt;entry gd:etag='"CUUEQX47eCp7ImA9WxRVEkQ."'>
							    ...
							  &lt;/entry>
							&lt;/feed>							
						</pre>
						<ul>
							<li>It is possible to do a conditional GET/PUT on the entry by using the 
								ETag <code>"CUUEQX47eCp7ImA9WxRVEkQ."</code></li>
						</ul>	
					</ul>	
				</div>	
				
				<div class="slide">
					<hgroup>
							<h1>GData Protocol: HTTP Methods Overriding</h1>
					</hgroup>	
					<ul>
						<li>Firewall restrictions</li>						
						<ul>
							<li>Some firewall configurations do not allow to send HTTP request other than GET and POST</li>
						</ul>
						<li>HTTP methods overriding through <code>POST</code></li>
						<pre class="brush: bash; class-name: 'tight'; gutter: 'false'">
							X-HTTP-Method-Override: PUT
							X-HTTP-Method-Override: DELETE
							X-HTTP-Method-Override: PATCH</pre>
						<li>Example</li>
						<pre class="brush: bash; class-name: 'tight'">
							POST /myfeed/1/1/
							X-HTTP-Method-Override: PATCH
							Content-Type: application/xml
							...	</pre>	
					</ul>					
				</div>	
				
			</section>
			
			
			
			
			
		</section>
		
		
	</body>
</html>	
